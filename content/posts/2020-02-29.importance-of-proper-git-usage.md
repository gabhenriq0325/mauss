---
title: Importance of Proper Git Usage
tags: PPL2020, git, proper
image: https://imgs.xkcd.com/comics/git_commit.png
---

![Commit messages steadily declining in quality](https://imgs.xkcd.com/comics/git_commit.png)

This is probably by far my favourite picture that describes git commit messages in a nutshell. It sums up most of our experience using and seeing git commits by ourselves or with our team. Of course, [credit where credit's due](https://xkcd.com/1296/)

It's pretty common to stumble upon these kinds of commit messages in the wild or with your team, especially if they're not accustomed to using git with a team or other developers, or just git itself.

## Outline & Focus

1. Why you should know this, especially if you're a developer
2. How a good commit message is supposed to be
3. How to use Git properly

<!-- content -->

## Why you should know and use this

Documentation for anything in your life is in my opinion one of the most crucial things to (at least) do, and if you do it right, it could be your best strong suit. Git commit, is one of your most powerful and convenient tool to document your codebase.

Did at least one of these crossed your mind at some point?

- Writing code without documentation is enough by just writing a clean and readable code with descriptive variables
- Git commit messages are a hassle and just a trivial thing you need to do everytime you want to push changes to your repository
- Git is just a way to save and synchronize your code like what cloud services do and messages commited with it is insignificant

What happens when there's a spaghetti code with minimal descriptive messages between commits, where would we know where to look first or where to learn. I can't barely remember what I wrote half a year ago if it weren't for the commits and documentation I made ahead of time. I'm sure we have better things to do to aside from remembering what we wrote for eternity.

Of course, other than to help us remember what we wrote, it also helps other developers and maintainers to find and fix the same issue we use to have. We could even revert to a working state in the past if it all breaks down, isn't that cool!

## How a good commit message is supposed to be

Perhaps the explanation beforehand was a little bit too vague, here's a solid and concrete example of what I meant. I present to you in my honest opinion by far the best commit message, and what it's supposed to be

[![Best git commit message](images/posts/ppl2020.best-git-commit.png)](https://github.com/alphagov/govuk-puppet/commit/63b36f93bf75a848e2125008aa1e880c5861cf46)

This commit message could have been easily written as `fix bug`, `add whitespace`, or `change comments`. Instead, [Dan Carley](https://github.com/dcarley), author of this commit, took his time to explain and document his commit for the benefit of the people working with him.

### Why this IMHO the best commit message

- It explains the reason behind the change with explanation of **what** and **why** it changed

<pre class="aqua-code" data-language="" data-title="">
I introduced some tests in a feature branch to match the contents of
`/etc/nginx/router_routes.conf`. They worked fine when run with `bundle exec
rake spec` or `bundle exec rspec modules/router/spec`. But when run as
`bundle exec rake` each should block failed with:

    ArgumentError:
      invalid byte sequence in US-ASCII
</pre>

- It is searchable by the error using `git log` and explains how it happens

<pre class="aqua-code" data-language="" data-title="">
    ArgumentError:
      invalid byte sequence in US-ASCII
</pre>

<pre class="aqua-code" data-language="" data-title="">
That particular template appears to be the only file in our codebase with an
identified encoding of `utf-8`. All others are `us-ascii`:
    ...
Attempting to convert that file back to US-ASCII identified the offending
character as something that looked like a whitespace:
    ...
</pre>

- It tells you its story

<pre class="aqua-code" data-language="" data-title="">
I eventually found that removing the `.with_content(//)` matchers made the
errors go away. That there weren't any weird characters in the spec file. And
that it could be reproduced by requiring Puppet in the same interpreter
</pre>

It goes into detail about what the problem is, the process of debugging and fixing it, and the last line reminds us that there's another human being behind every commit. We can feel Dan's frustration and his satisfaction after finally solving it.

<pre class="aqua-code" data-language="" data-title="">
Now the tests work! One hour of my life I won't get back..
</pre>

### Commit messages matter

It takes practice and full consciousness to write good and descriptive messages. This might be an extreme example for just a whitespace and I wouldn't expect all commits should be like this Especially not like [this C commit message](https://github.com/mpv-player/mpv/commit/1e70e82baa9193f6f027338b0fab0f5078971fbe)

## How do we properly write our commits

Your Version Control System (VCS) could display your git commits if you give it a body or description

![GitHub git commit](images/posts/ppl2020.github-git-commit.png)

See example above where the top commit has 3 dots, it could be expanded as shown below

![GitHub commit description](images/posts/ppl2020.github-git-commit-description.png)

![GitHub commit expanded](images/posts/ppl2020.github-git-commit-expanded.png)

> A diff will tell you what changed, but only the commit message can properly tell you why.
> -Chris

Here's a guided list of what you should remember when writing your commit messages

1. Separate subject from body with a blank line

    You can add a body as description by seperating the first line with a blank space and the rest would be the body

2. Limit the subject line to 50 characters

    A title should be able to give a rough overview of what the story wants to tell

3. Capitalize the subject line

    A title should start with a capitalized letter, pretty self-explanatory here

4. Do not end the subject line with a period

    A title should now end with a period

5. Use the imperative mood in the subject line

    Here's a sentence to help remember this rule
    - This commit will **your subject here**

    For example, with imperative forms:
    - This commit will *refactor feature X*
    - This commit will *add tests for home*
    - This commit will *remove deprecated packages*
    - This commit will *fix bug in worker file*

    It will not work with non-imperative forms:
    - This commit will *fixed bug not printing*
    - This commit will *added feature Y*

    Imperative forms is only important for subject, so you can write anything you want in the body

6. Wrap the body at 72 characters

    Git doesn't wrap texts automatically so you need to keep in mind its right margin, and wrap your text manually. The recommendation is to do this at 72 characters, so that Git has plenty of room to indent text while still keeping everything under 80 characters overall.

7. Use the body to explain what and why vs. how

    I think this has been sufficiently explained in the second part of this post by Dan's commit

### VS Code for editing your commit messages

There's a lot of text editors that could integrate seamlessly with Git, but the one I use is VS Code and it's chosen when Git is installed

You could add/stage your files using VS Code's integrated source control or with the classic `git add` and then just run

<pre class="aqua-code" data-language="" data-title="">
git commit
</pre>

It will then open the commit file editor and you can write your subject and body there

![VS Code commit editor](images/posts/ppl2020.vscode-git-commit.png)

> Write good commits, the future maintainer that thanks you may be yourself!

---

Reference(s):

- <https://dhwthompson.com/2019/my-favourite-git-commit>
- <https://chris.beams.io/posts/git-commit/>
